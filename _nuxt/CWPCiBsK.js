import{_ as r}from"./1wwtMGpE.js";import{_ as a}from"./gzUAsPPu.js";import{p as l,_ as d,e as u,w as n,o as m,a as t,d as o,b as p}from"./DEPsLRCN.js";import{u as g}from"./BzDXOk23.js";const w=l("/kb-over.jpeg"),f=l("/kb-layout.jpeg"),y=l("/kb-topdown.jpeg"),v=l("/kb-pov.jpeg"),b=l("/kb-bottom.jpeg"),k=l("/kb-in-case.jpeg"),h={__name:"keyboard",setup(x){return g({title:"I Built a Custom Keyboard! - Derek Corniello"}),(I,e)=>{const i=r,s=a;return m(),u(s,{name:"blog",title:"I Built a Custom Keyboard!"},{default:n(()=>[e[1]||(e[1]=t("div",{class:"image-container"},[t("img",{src:w,alt:"An over the shoulder shot of me testing the keyboard."}),t("p",{class:"image-caption"},[t("a",{href:"https://www.monkeytype.com"},"Monkeytype"),o(" testing the keyboard! ")])],-1)),e[2]||(e[2]=t("div",{class:"divider-container"},[t("div",{class:"divider-line"}),t("div",{class:"divider-glow"})],-1)),e[3]||(e[3]=o(" Ever since I started watching ",-1)),e[4]||(e[4]=t("a",{href:"https://www.youtube.com/c/theprimeagen"},"ThePrimeagen",-1)),e[5]||(e[5]=o(" and his ",-1)),e[6]||(e[6]=t("a",{href:"https://kinesis-ergo.com/"},"Kinesis keyboard",-1)),e[7]||(e[7]=o(", I have wanted to try one out for a very long time. Initially, I couldn't justify spending so much money, so I decided to take matters into my own hands. Thus, a new project was born. ",-1)),e[8]||(e[8]=t("div",{class:"divider-container"},[t("div",{class:"divider-line"}),t("div",{class:"divider-glow"})],-1)),e[9]||(e[9]=t("div",{style:{"text-align":"center","font-size":"1.5rem"}},[t("strong",null,[t("u",null,"Bill of Materials (BOM)")])],-1)),e[10]||(e[10]=t("div",{class:"divider-container"},[t("div",{class:"divider-line"}),t("div",{class:"divider-glow"})],-1)),e[11]||(e[11]=o(" I chose a Dactyl Manuform layout, but these materials are standard for DIY keyboards: ",-1)),e[12]||(e[12]=t("ul",null,[t("li",null,"2 Pro Micro Boards"),t("li",null,"Diodes (1N4148)"),t("li",null,"Key Switches and Caps"),t("li",null,"TRRS Cable and Jacks"),t("li",null,"Solid Core Wire"),t("li",null,"M4 Heat Inserts and Screws"),t("li",null,"3D Printed Case")],-1)),e[13]||(e[13]=o(" I also used a soldering iron, lead-free solder, wire strippers, and a multimeter for testing solder points. ",-1)),e[14]||(e[14]=t("br",null,null,-1)),e[15]||(e[15]=t("br",null,null,-1)),e[16]||(e[16]=t("div",{style:{"text-align":"center","font-size":"1.5rem"}},[t("strong",null,[t("u",null,"Project Goals")])],-1)),e[17]||(e[17]=t("div",{class:"divider-container"},[t("div",{class:"divider-line"}),t("div",{class:"divider-glow"})],-1)),e[18]||(e[18]=o(" My main goals were simple: learn about keyboard design, implement USB-C, have fun, and complete the project efficiently. Functionality, durability, and good ergonomics were non-negotiable. ",-1)),e[19]||(e[19]=t("br",null,null,-1)),e[20]||(e[20]=t("br",null,null,-1)),e[21]||(e[21]=t("div",{style:{"text-align":"center","font-size":"1.5rem"}},[t("strong",null,[t("u",null,"Keyboard Matrix & Ghosting Prevention")])],-1)),e[22]||(e[22]=t("div",{class:"divider-container"},[t("div",{class:"divider-line"}),t("div",{class:"divider-glow"})],-1)),e[23]||(e[23]=o(" A keyboard is basically a grid of wires (rows × columns), a bunch of switches sitting at the intersections, and a tiny brain (microcontroller) that scans that grid super fast to figure out which switch closed. No magic, just clever wiring and some firmware doing laps. This matrix adaptation of a keyboard is what allows smaller hardware to make quick scans for key presses. Instead of one pin per key, keys share wires in a matrix. Each switch connects a ",-1)),e[24]||(e[24]=t("em",null,"row",-1)),e[25]||(e[25]=o(" to a ",-1)),e[26]||(e[26]=t("em",null,"column",-1)),e[27]||(e[27]=o(". Press a key → that row and column are now electrically connected. What happens is... ",-1)),e[28]||(e[28]=t("ul",null,[t("li",null,'The microcontroller sets one row "active" at a time (drives it high/low).'),t("li",null,'It then reads all the columns to see which ones are "lit up".'),t("li",null,"It moves to the next row and repeats. This happens thousands of times per second.")],-1)),e[29]||(e[29]=o(` From that row+column pair, it knows exactly which key you hit. Fast enough that it feels instant. You may be asking about multiple keys being pressed at once right about now. Let's take, for example, a 2x2 keyboard. If I were to hold down the keys in position (1,1), (1,2) and (2,1), the microcontroller will notice that rows 1 and 2 are active, and columns 1 and 2 are also active. Therefore, the key in position (2,2) would appeae as pressed, and is therefore "ghosted". Without diodes, current can sneak through multiple pressed switches and make it `,-1)),e[30]||(e[30]=t("em",null,"look",-1)),e[31]||(e[31]=o(` like an extra key (the "fourth corner" of a rectangle) is pressed. A diode on each switch forces current to flow in only one direction, so signals don't backfeed through other keys, which fixes the ghosting problem! To deal with all of these columns and rows, we will deploy a firmware (QMK in my case) to the microcontroller to deal with taking the data from current to serial data. It does this with the following features and techniques: `,-1)),e[32]||(e[32]=t("ul",null,[t("li",null,[t("strong",null,"Matrix scanning:"),o(" Runs that row→column loop nonstop to detect closures. ")]),t("li",null,[t("strong",null,"Debouncing:"),o(' Mechanical switches "chatter" for a few ms; firmware smooths that into a single press. ')]),t("li",null,[t("strong",null,"Keymap & layers:"),o(" Maps row/col positions to actual keycodes, plus your layers/macros. ")]),t("li",null,[t("strong",null,"Split comms (for two halves):"),o(" One side is master. It scans its half, receives the other half's scan data over TRRS/serial, merges both, then sends a single USB HID report to the computer. ")])],-1)),e[33]||(e[33]=o(" So the flow ends up looking loke this: ",-1)),e[34]||(e[34]=t("code",null,"Switch press → row/column connect → diode keeps it one-way → MCU sees it during scan → firmware debounces & maps → USB HID event → OS gets a keypress",-1)),e[35]||(e[35]=t("br",null,null,-1)),e[36]||(e[36]=t("br",null,null,-1)),e[37]||(e[37]=t("div",{style:{"text-align":"center","font-size":"1.5rem"}},[t("strong",null,[t("u",null,"Build Process")])],-1)),e[38]||(e[38]=t("div",{class:"divider-container"},[t("div",{class:"divider-line"}),t("div",{class:"divider-glow"})],-1)),e[39]||(e[39]=o(" The build process followed these main steps: ",-1)),e[40]||(e[40]=t("ol",null,[t("li",null,[t("strong",null,"Planning the layout:"),o(" Decided on a 5-row, 6-column layout with a 6-key thumb cluster and mapped out the key positions. ")]),t("li",null,[t("strong",null,"Handwiring the keyboard matrix:"),o(" Wired all switches to rows and columns, adding diodes to prevent ghosting and ensure accurate key detection. ")]),t("li",null,[t("strong",null,"Connecting the microcontrollers:"),o(" Soldered the Pro Micro boards and connected them using a TRRS cable for split keyboard communication. ")]),t("li",null,[t("strong",null,"Case assembly:"),o(" Placed all components into the 3D printed case and secured with M4 heat inserts and screws. ")]),t("li",null,[t("strong",null,"Key installation:"),o(" Inserted the switches and keycaps, double-checking each row and column for proper connectivity. ")]),t("li",null,[t("strong",null,"Firmware & Testing:"),o(" Uploaded the QMK firmware, tested each key, and ensured ghosting was prevented and everything worked correctly. ")])],-1)),e[41]||(e[41]=t("div",{class:"image-container"},[t("img",{src:f,alt:"Completed keyboard layout",style:{filter:"invert(1)",border:"4px solid #ff0033"}}),t("p",{class:"image-caption"},"The layout of the keyboard.")],-1)),e[42]||(e[42]=t("div",{class:"image-container"},[t("img",{src:y,alt:"Completed keyboard"}),t("p",{class:"image-caption"},"Top-down view of the completed keyboard")],-1)),e[43]||(e[43]=t("div",{class:"image-container"},[t("img",{src:v,alt:"Completed keyboard POV"}),t("p",{class:"image-caption"},"First-person view of the keyboard in use")],-1)),e[44]||(e[44]=t("br",null,null,-1)),e[45]||(e[45]=t("br",null,null,-1)),e[46]||(e[46]=t("div",{style:{"text-align":"center","font-size":"1.5rem"}},[t("strong",null,[t("u",null,"Testing and Final Thoughts")])],-1)),e[47]||(e[47]=t("div",{class:"divider-container"},[t("div",{class:"divider-line"}),t("div",{class:"divider-glow"})],-1)),e[48]||(e[48]=o(" After assembly, I tested the keyboard thoroughly. Getting the QMK software to correctly configure was a little bit of a hassle, but once I found the correct sections of the documentation, it was a breeze thereafter. It met all of my initial goals; typing felt comfortable, the USB-C connection worked flawlessly, and the layout was ergonomic. ",-1)),e[49]||(e[49]=t("br",null,null,-1)),e[50]||(e[50]=t("br",null,null,-1)),e[51]||(e[51]=t("div",{style:{"text-align":"center","font-size":"1.5rem"}},[t("strong",null,[t("u",null,"Fun, Optional Upgrades")])],-1)),e[52]||(e[52]=t("div",{class:"divider-container"},[t("div",{class:"divider-line"}),t("div",{class:"divider-glow"})],-1)),e[53]||(e[53]=o(" I also made some small improvements to the build itself by adding some laptop rubber feet to it in order to stop it from sliding: ",-1)),e[54]||(e[54]=t("div",{class:"image-container"},[t("img",{src:b,alt:"The bottom of one half of the keyboard showing the rubber feet"}),t("p",{class:"image-caption"},"The bottom of one half of the keyboard showing the rubber feet")],-1)),e[55]||(e[55]=t("p",null,"Plus, I got an EVA hard case with foam inserts for travel, since I do that a lot:",-1)),e[56]||(e[56]=t("div",{class:"image-container"},[t("img",{src:k,alt:"The keyboard displayed in a case"}),t("p",{class:"image-caption"},"Foam fitted EVA case for safe travel")],-1)),e[57]||(e[57]=t("br",null,null,-1)),e[58]||(e[58]=t("br",null,null,-1)),e[59]||(e[59]=t("div",{class:"divider-container"},[t("div",{class:"divider-line"}),t("div",{class:"divider-glow"})],-1)),e[60]||(e[60]=t("br",null,null,-1)),e[61]||(e[61]=t("br",null,null,-1)),e[62]||(e[62]=o(" Overall, this was a very interesting, fun, and overall useful project that I believe will help me for years to come! ",-1)),e[63]||(e[63]=t("br",null,null,-1)),e[64]||(e[64]=t("br",null,null,-1)),p(i,{style:{"text-align":"center","background-color":"#ff66b2",color:"white",padding:"10px 20px","border-radius":"5px","text-decoration":"none"},class:"r-link",to:"/blog"},{default:n(()=>[...e[0]||(e[0]=[o(" Back to Blogs ",-1)])]),_:1})]),_:1})}}},S=d(h,[["__scopeId","data-v-01f264ab"]]);export{S as default};
